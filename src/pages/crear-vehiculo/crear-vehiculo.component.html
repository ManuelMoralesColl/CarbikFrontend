<ion-header>
  <ion-toolbar>
    <ion-title>Crear Vehículo</ion-title>
  </ion-toolbar>
</ion-header>
<ion-button expand="block" color="medium" [routerLink]="['/home']">
  🏠 Volver a Inicio
</ion-button>
<ion-button expand="full" color="medium" (click)="salir()"> Perfil </ion-button>
<ion-content>
  <ion-grid>
    <ion-row>
      <ion-col size="12">
        <ion-item>
          <ion-label position="stacked">Modelo</ion-label>
          <ion-input [(ngModel)]="modelo"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">Marca</ion-label>
          <ion-input [(ngModel)]="marca"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">Año</ion-label>
          <ion-input type="number" [(ngModel)]="ano"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">Descripción</ion-label>
          <ion-textarea [(ngModel)]="descripcion"></ion-textarea>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">Información Adicional</ion-label>
          <ion-textarea [(ngModel)]="infoAdicional"></ion-textarea>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">Precio</ion-label>
          <ion-input type="number" [(ngModel)]="precio"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">Fotos</ion-label>
          <input type="file" (change)="onFileSelected($event)" />
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Categoría principal</ion-label>
          <ion-select [(ngModel)]="idPadreSeleccionado" interface="popover">
            <ion-select-option
              *ngFor="let seccion of seccionesPadre"
              [value]="seccion.id"
            >
              {{ seccion.nombre }}
            </ion-select-option>
          </ion-select>
        </ion-item>

        <ion-item *ngIf="idPadreSeleccionado">
          <ion-label position="stacked">Subcategoría</ion-label>
          <ion-select [(ngModel)]="idSeccionSeleccionada" interface="popover">
            <ion-select-option
              *ngFor="let sub of seccionesHijas[idPadreSeleccionado]"
              [value]="sub.id"
            >
              {{ sub.nombre }}
            </ion-select-option>
          </ion-select>
        </ion-item>
        <div *ngIf="imagenesSubidas.length > 0">
          <ion-label>Imágenes cargadas:</ion-label>
          <ion-grid>
            <ion-row>
              <ion-col size="6" *ngFor="let img of imagenesSubidas">
                <img
                  [src]="backendUrl + img"
                  style="width: 100%; border-radius: 8px"
                />
              </ion-col>
            </ion-row>
          </ion-grid>
        </div>
        <ion-button expand="full" (click)="crearVehiculo()">Publicar Vehículo</ion-button>

        <ion-item lines="none">
          <ion-label>En venta</ion-label>
          <ion-checkbox
            slot="end"
            [(ngModel)]="enVenta"
            name="enVenta"
          ></ion-checkbox>
        </ion-item>
        
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
